---
import Layout from '../layouts/Layout.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import Generator from '../components/Generator'
import BackTop from '../components/BackTop.astro'
import '../message.css'
import 'katex/dist/katex.min.css'
import 'highlight.js/styles/atom-one-dark.css'
---

<Layout title="Nostradamoussa">
  <main >
    <Header />
    <Generator client:load />
    <Footer />
    <BackTop/>
  </main>
</Layout>

<script>
async function checkCurrentAuth() {
  const authPassword = process.env.AUTH_PASSWORD; // Get the password from the environment variable
  const authenticated = sessionStorage.getItem('authenticated'); // Check if the user is authenticated

  if (authenticated !== 'true') {
    const userEnteredPassword = prompt('Enter your password:'); // Prompt the user for the password

    if (userEnteredPassword !== authPassword) {
      alert('Authentication failed. Please enter the correct password.'); // Show an alert for authentication failure
      checkCurrentAuth(); // Re-prompt the user
    } else {
      sessionStorage.setItem('authenticated', 'true'); // Store authentication status
    }
  }
}

checkCurrentAuth();
</script>



