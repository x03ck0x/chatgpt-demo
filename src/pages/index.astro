---
import Layout from '../layouts/Layout.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import Generator from '../components/Generator'
import BackTop from '../components/BackTop.astro'
import '../message.css'
import 'katex/dist/katex.min.css'
import 'highlight.js/styles/atom-one-dark.css'
---

<Layout title="Nostradamoussa">
  <main >
    <Header />
    <Generator client:load />
    <Footer />
    <BackTop/>
  </main>
</Layout>

<script>
async function checkCurrentAuth() {
  const userEnteredPassword = prompt('Enter your password:'); // Prompt the user for the password
  const authPassword = process.env.AUTH_PASSWORD; // Get the password from the environment variable

  if (userEnteredPassword !== authPassword) {
    window.location.href = '/password';
  }
}
checkCurrentAuth();
</script>


//<script>
//async function checkCurrentAuth() {
//  const password = localStorage.getItem('pass')
//  const response = await fetch('/api/auth', {
//    method: 'POST',
//    headers: {
//      'Content-Type': 'application/json',
//    },
//    body: JSON.stringify({
//      pass: password,
//    }),
//  })
//  const responseJson = await response.json()
//  if (responseJson.code !== 0) {
//    window.location.href = '/password'
//  }
//}
//checkCurrentAuth()
//</script>
