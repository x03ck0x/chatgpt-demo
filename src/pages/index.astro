<!-- index.astro -->
<form id="login-form">
  <label for="password">Password:</label>
  <input type="password" id="password" name="password" required>
  <button type="submit">Login</button>
</form>

<script>
  async function checkCurrentAuth() {
    const authPassword = import.meta.env.AUTH_PASSWORD; // Get the password from the environment variable
    const authenticated = sessionStorage.getItem('authenticated'); // Check if the user is authenticated

    if (authenticated !== 'true') {
      const userEnteredPassword = prompt('Enter your password:'); // Prompt the user for the password

      if (userEnteredPassword === authPassword) {
        sessionStorage.setItem('authenticated', 'true'); // Store authentication status
        window.location.href = '/index2.astro'; // Redirect to index.astro if the password is correct
      } else {
        alert('Authentication failed. Please enter the correct password.');
      }
    }
  }

  checkCurrentAuth();
</script>
